<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		介绍 | 
	 
	Hexo
	</title>
	
	<!-- keywords,description -->
	 

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/favicon.ico">
	


	<!-- search -->
	<script>
		var searchEngine = "https://www.google.com/search?q=";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "https://lixiao-yu.github.io/";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	
<link rel="stylesheet" href="/css/main.css">

	
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/darcula.min.css">


	
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

	
<script src="/js/main.js"></script>

	
		
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>

		
<script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>

	
	
		<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
	<header id="header">
    <a id="title" href="/" class="logo">Hexo</a>

	<ul id="menu">
		<li class="menu-item">
			<a href="/about" class="menu-item-link">ABOUT</a>
		</li>
		
		<!-- <li class="menu-item">
			<a href="https://github.com/wujun234/uid-generator-spring-boot-starter" class="menu-item-link" target="_blank">
				UidGenerator
			</a>
		</li> -->
		<!-- <li class="menu-item">
			<a href="https://github.com/wujun234" class="menu-item-link" target="_blank">
				<i class="fa fa-github fa-2x"></i>
			</a>
		</li> -->
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="search" placeholder="按回车全站搜索">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Mysql
									</a>
									
							<ul>
								<li class="file">
									<a href="/2021/01/17/Mysql/Mysql%E7%B4%A2%E5%BC%95%E4%BD%BF%E7%94%A8/">
										Mysql索引使用
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Mysql/Mysql%E7%B4%A2%E5%BC%95%E5%AD%98%E5%82%A8/">
										Mysql索引存储
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Mysql/Mysql%E9%94%81/">
										Mysql锁
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Mysql/%E4%BA%8B%E5%8A%A1%E7%9A%84ACID/">
										事务的ACID
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Python
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										cookbook经验总结
									</a>
									
							<ul>
								<li class="file">
									<a href="/2021/01/26/Python/cookbook%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/1.%20%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">
										1. 常见数据结构与算法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/02/25/Python/cookbook%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/3.%20%E6%95%B0%E5%AD%97%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4/">
										3. 数字日期与时间
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/02/25/Python/cookbook%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/4.%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8/">
										4. 迭代器和生成器
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/02/25/Python/cookbook%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/5.%20%E6%96%87%E4%BB%B6%E4%B8%8EIO/">
										5. 文件与IO
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/02/25/Python/cookbook%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/6.%20%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81%E5%92%8C%E5%A4%84%E7%90%86/">
										6. 数据编码和处理
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/02/25/Python/cookbook%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/7.%20%E5%87%BD%E6%95%B0/">
										7. 函数
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/02/25/Python/cookbook%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/8.%20%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/">
										8. 类和对象
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Shell
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Shell基础
									</a>
									
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/1%20%E5%9F%BA%E7%A1%80shell%E5%8F%8A%E5%85%B6%E5%91%BD%E4%BB%A4/">
										1 基础shell及其命令
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/1%E5%9F%BA%E7%A1%80shell%E5%8F%8A%E5%85%B6%E5%91%BD%E4%BB%A4/">
										1基础shell及其命令
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/2%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">
										2文件系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/3shell%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/">
										3shell编程基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/5%E5%87%BD%E6%95%B0%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
										5函数和正则表达式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/6sed/">
										6sed
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/7gawk/">
										7gawk
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Shell实战
									</a>
									
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%AE%9E%E6%88%98/gawk%E5%AE%9E%E6%88%98/">
										gawk实战
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%AE%9E%E6%88%98/sed%E5%AE%9E%E6%88%98/">
										sed实战
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%AE%9E%E6%88%98/%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%A1%B9%E7%9B%AE/">
										字符串项目
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/Shell/Shell%E5%AE%9E%E6%88%98/%E7%B3%BB%E7%BB%9F%E5%B7%A1%E6%A3%80/">
										系统巡检
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/%E5%A4%8D%E6%9D%82%E7%BD%91%E7%BB%9C/">
										复杂网络
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2021/01/17/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/">
										我的第一篇博客
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title">

	3shell编程基础
</h1>
<div class="article-meta">
	
	<span>Rrigyouu</span>
	<span>2021-01-17 01:34:36</span>
    
		<div id="article-categories">
            
		</div>
    
</div>

<div id="article-content">
	<h3 id="基础脚本"><a href="#基础脚本" class="headerlink" title="基础脚本"></a>基础脚本</h3><hr>
<h4 id="创建shell脚本："><a href="#创建shell脚本：" class="headerlink" title="创建shell脚本："></a>创建shell脚本：</h4><p>第一行指定shell：<code>#!/bin/bash</code></p>
<p>显示消息：<code>echo -n &quot;xxx:&quot;</code> 其中-n表示不换行</p>
<p>引用变量：$或者${}</p>
<p>转义<code>\$</code></p>
<hr>
<h4 id="命令替换"><a href="#命令替换" class="headerlink" title="命令替换"></a>命令替换</h4><ol>
<li>通过``替换；</li>
<li>通过$()替换。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">test1=`date`</span><br><span class="line"><span class="meta">#</span><span class="bash"> 输出为year month day格式</span></span><br><span class="line">test2=$(date +%y%m%d)</span><br><span class="line">echo $test1 </span><br><span class="line">echo $test2</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p>输出重定向： &gt;（覆盖数据） &gt;&gt;（追加数据）</p>
<p>输出重定向：&lt;（输入冲想到到） &lt;&lt;（内联输入重定向）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">test2=$(date +%y%m%d)</span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -al /usr/bin目录，然后重定向输出到/root/<span class="built_in">log</span>.**下</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wc输入重定向，输出文本行数、词数、字节数</span></span><br><span class="line">ls /usr/bin -al &gt; /root/log.$test2</span><br><span class="line">wc &lt; /root/log.$test2</span><br><span class="line">echo &quot;-----------------------&quot;</span><br><span class="line">wc &lt;&lt; EOF</span><br><span class="line">test string 1</span><br><span class="line">test string 2</span><br><span class="line">test string 3</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h4><p>command 1 | command 2</p>
<p><code>rpm -qa | sort &gt; rpm.list </code></p>
<hr>
<h4 id="数学计算"><a href="#数学计算" class="headerlink" title="数学计算"></a>数学计算</h4><ul>
<li>expr</li>
</ul>
<p>如： <code>expr 1 + 8 ; expr 1 \* 8 ; var1=$(expr 1 + 8)</code></p>
<ul>
<li>[]</li>
</ul>
<p>如：<code>var1=$[1 * 8]</code></p>
<p>注意，shell的数学运算符只支持整数运算</p>
<ul>
<li>bc （浮点数）</li>
</ul>
<p>如：<code>var1=$(echo &quot;scale=4; 3.44 / 5&quot; | bc)</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">a=2123.1</span><br><span class="line">b=131.1</span><br><span class="line">c=1321</span><br><span class="line">d=11</span><br><span class="line"><span class="meta">#</span><span class="bash"> 特别注意，bc中定义的变量不采用$，引用外部变量才用$</span></span><br><span class="line">var=$(bc &lt;&lt; EOF</span><br><span class="line">scale=4</span><br><span class="line">temp1=($a + $b)</span><br><span class="line">temp2=(temp1 * $c)</span><br><span class="line">temp3=(temp2 - $d)</span><br><span class="line">temp1 + temp2 + temp3</span><br><span class="line">EOF</span><br><span class="line">)</span><br><span class="line">echo $var</span><br></pre></td></tr></table></figure>
<p>其中，scale指明小数位数；echo通过管道输入到bc中，进行运算符返回。</p>
<hr>
<h4 id="退出状态码"><a href="#退出状态码" class="headerlink" title="退出状态码"></a>退出状态码</h4><p>状态码0-255；若超过，则取模。</p>
<p>查看最后一条指令的状态退出码：<code>echo $?</code></p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>退出码</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>命令成功退出</td>
</tr>
<tr>
<td>1</td>
<td>一般未知错误</td>
</tr>
<tr>
<td>2</td>
<td>不合适的shell命令</td>
</tr>
<tr>
<td>126</td>
<td>命令不可执行</td>
</tr>
<tr>
<td>127</td>
<td>没找到命令</td>
</tr>
<tr>
<td>128</td>
<td>无效退出参数</td>
</tr>
<tr>
<td>130</td>
<td>control+c退出</td>
</tr>
</tbody></table>
<p>如：<code>date %t ; echo $?</code></p>
<p><code>exit 1</code>：退出</p>
<hr>
<h3 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h3><hr>
<h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if command1 </span><br><span class="line">then</span><br><span class="line">    command2</span><br><span class="line">elif command3</span><br><span class="line">    command4</span><br><span class="line">else</span><br><span class="line">    command5</span><br><span class="line">fi</span><br><span class="line"><span class="meta">#</span><span class="bash"> 另一种写法</span></span><br><span class="line">if command1; then</span><br><span class="line">    command2</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>注意，else在代码块elif中，上面情况：</p>
<p>如果 command1退出码为0，只执行command2；</p>
<p>如果command1退出码不为0，command3退出码为0，只执行command4；</p>
<p>若command1退出码不为0，command3退出码不为0，只执行command5.</p>
<p>test方法： 若条件成立，返回退出码0；若不成立，返回非0退出码。</p>
<p> test condition = [ condition ]</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">if test 1; then</span><br><span class="line">    echo 123</span><br><span class="line">else</span><br><span class="line">    echo 456</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if [ 1 -eq 3 ]; then</span><br><span class="line">    echo 123</span><br><span class="line">else</span><br><span class="line">    echo 456</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>输出：123   456</p>
<hr>
<h4 id="条件比较"><a href="#条件比较" class="headerlink" title="条件比较"></a>条件比较</h4><h5 id="数值比较"><a href="#数值比较" class="headerlink" title="数值比较"></a>数值比较</h5><table>
<thead>
<tr>
<th>比较</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>n1 -eq n2</td>
<td>equal，判断相等</td>
</tr>
<tr>
<td>n1 -ne n2</td>
<td>not equal，判断是否不相等</td>
</tr>
<tr>
<td>n1 -gt n2</td>
<td>greater than，大于</td>
</tr>
<tr>
<td>n1 -lt n2</td>
<td>less than，小于</td>
</tr>
<tr>
<td>n1 -ge n2</td>
<td>greater equal，大于或等于</td>
</tr>
<tr>
<td>n1 -le n2</td>
<td>less equa，小于或等于</td>
</tr>
</tbody></table>
<p>注意：</p>
<p>bash shell只能处理整数！</p>
<h5 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h5><table>
<thead>
<tr>
<th>比较</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>str1 = str2</td>
<td>字符串是否相同</td>
</tr>
<tr>
<td>str1 != str2</td>
<td>字符创是否不同</td>
</tr>
<tr>
<td>str1 &lt; str2</td>
<td>字符串是否小于（需要转义）</td>
</tr>
<tr>
<td>str1 &gt; str2</td>
<td>字符创是否大于（需要转义）</td>
</tr>
<tr>
<td>-n str1</td>
<td>str1长度是否非0</td>
</tr>
<tr>
<td>-z str1</td>
<td>str1长度是否为0</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">var1=baseball</span><br><span class="line">var2=bast</span><br><span class="line">if [ $var1 \&lt; $var2 ]; then</span><br><span class="line">    echo 123</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<p>sort命令中，采用本地文本库，大写字母大于小写字母；</p>
<p>比较中采用标准ASCII码，大写字母（65-90）小于小写字母（97-122）。</p>
<h5 id="文件比较"><a href="#文件比较" class="headerlink" title="文件比较"></a>文件比较</h5><table>
<thead>
<tr>
<th>比较</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-d file</td>
<td>dictionary，是否为目录</td>
</tr>
<tr>
<td>-e file</td>
<td>exist，是否存在</td>
</tr>
<tr>
<td>-f file</td>
<td>file，是否是一个文件</td>
</tr>
<tr>
<td>-r file</td>
<td>read，是否存在并可读</td>
</tr>
<tr>
<td>-s file</td>
<td>size，是否存在并非空</td>
</tr>
<tr>
<td>-w file</td>
<td>write，是否存在并可写</td>
</tr>
<tr>
<td>-x file</td>
<td>execute，是否存在并可执行</td>
</tr>
<tr>
<td>-O file</td>
<td>own，是否存在并属于当前用户</td>
</tr>
<tr>
<td>-G file</td>
<td>group，是否存在并所属组相同</td>
</tr>
<tr>
<td>file1 -nt file2</td>
<td>newer than，file1是否比file2新</td>
</tr>
<tr>
<td>file1 -ot file2</td>
<td>older than，file1是否比file2旧</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">cd /root/</span><br><span class="line">touch 1.txt</span><br><span class="line">if [ -r 1.txt ]; then</span><br><span class="line">    echo 123</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">rm -rf 1.txt</span><br><span class="line">if [ -r 1.txt ]; then</span><br><span class="line">    echo 123</span><br><span class="line">else</span><br><span class="line">    echo 456</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>


<p>复合条件</p>
<p><code>[ condition1 ] &amp;&amp; [ condition2 ]</code></p>
<p><code>[ condition1 ] || [ condition2 ]</code></p>
<hr>
<h4 id="高级特性"><a href="#高级特性" class="headerlink" title="高级特性"></a>高级特性</h4><ul>
<li>双括号(())</li>
</ul>
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>val++</td>
<td>后增</td>
</tr>
<tr>
<td>val–</td>
<td>后减</td>
</tr>
<tr>
<td>++val</td>
<td>先增</td>
</tr>
<tr>
<td>–val</td>
<td>先减</td>
</tr>
<tr>
<td>!</td>
<td>逻辑取反</td>
</tr>
<tr>
<td>~</td>
<td>位取反</td>
</tr>
<tr>
<td>**</td>
<td>幂运算</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>左移</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>右移</td>
</tr>
<tr>
<td>&amp;</td>
<td>位布尔和</td>
</tr>
<tr>
<td>|</td>
<td>位布尔或</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>逻辑和</td>
</tr>
<tr>
<td>||</td>
<td>逻辑或</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">value=10</span><br><span class="line">if (( $value &gt;&gt;1 &gt; 0 )); then</span><br><span class="line">    echo 123</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>注意：双括号中不需要转义符号。</p>
<ul>
<li>双方括号（通过==进行模式匹配）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">str1=hello_word</span><br><span class="line">if [[ $str1 == hello* ]]; then</span><br><span class="line">    echo 123</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="case-命令"><a href="#case-命令" class="headerlink" title="case 命令"></a>case 命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">case variable in</span><br><span class="line">pattern1 | pattern2) commands1;;</span><br><span class="line">pattern3) commands2;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">command=abc</span><br><span class="line"></span><br><span class="line">case $command in</span><br><span class="line">add | adc) echo $command;;</span><br><span class="line">ab*) echo 132;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h3><hr>
<h5 id="for循环语句"><a href="#for循环语句" class="headerlink" title="for循环语句"></a>for循环语句</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for var in list</span><br><span class="line">do </span><br><span class="line">    command</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">for var in list; do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>读取列表中的值，双引号会当做同一个值：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for test in &quot;A B&quot; C D E; do</span><br><span class="line">    echo $test</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">list=&quot;A B C D E&quot;</span><br><span class="line">list=$list&quot; F&quot;</span><br><span class="line">echo $list</span><br><span class="line">for test in $list; do</span><br><span class="line">    echo $test</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>上述例子中，字段分隔符为空格，可以通过修改IFS更改字段分隔符。</p>
<p>如下，替换成了符号<code>:;&quot;</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">var=&quot;a b c d f:A a;B b:C c&quot;</span><br><span class="line">IFS=&quot;;:&quot;</span><br><span class="line">for value in $var; do</span><br><span class="line">    echo $value</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="C语言的for循环语句"><a href="#C语言的for循环语句" class="headerlink" title="C语言的for循环语句"></a>C语言的for循环语句</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (( a = 1; a &lt; 10; a++ )); do</span><br><span class="line">    commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<p>此处变量赋值可以有空格，条件判断不以美元开头；迭代算式没有使用expr或者[]命令。</p>
<p>可以赋值多个变量，但条件判断只能有一个</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for (( i = 1; i&lt;10; i++ )); do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 多个变量</span></span><br><span class="line">for (( a=1, b=1; a&lt;10; a++, b--)); do</span><br><span class="line">    echo $a $b</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">while test command</span><br><span class="line">do</span><br><span class="line">    other commands</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">while test command; do</span><br><span class="line">    other command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>此处test同if语句，但是command退出码必须改变，否则会无限循环。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">var1=10</span><br><span class="line">while echo $var1; do</span><br><span class="line">    echo 1</span><br><span class="line">    exit 1</span><br><span class="line">done</span><br><span class="line">echo $?</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">var=10</span><br><span class="line">while [ $var -ge 0 ]; do</span><br><span class="line">    var=$[ $var - 1 ]</span><br><span class="line">    echo $var</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="until语句"><a href="#until语句" class="headerlink" title="until语句"></a>until语句</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">until test command</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">until test command; do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>test退出码不为0，才会执行语句。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">var=11</span><br><span class="line">until [ $var -lt 1 ]; do</span><br><span class="line">    echo $var</span><br><span class="line">    var=$[ $var - 1 ]</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="循环的控制"><a href="#循环的控制" class="headerlink" title="循环的控制"></a>循环的控制</h5><p>跳出循环：break n；默认情况下n=1，代表跳出第一层循环，即当前循环。</p>
<p>继续循环：continue n；提前终止某次循环中的指令，继续第n层循环。</p>
<p>循环输出：done 后面增加一个重定向<code>&gt;</code>即可。</p>
<p>循环输入：done后面增加重定向<code>&lt;</code>。</p>
<p>注意：shell循环不要使用管道，因为使用后，会创建一个子shell，导致退出码为0。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">IFS=&quot;:&quot;</span><br><span class="line">while read line; do</span><br><span class="line">    echo $line</span><br><span class="line">done &lt; /etc/passwd</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><hr>
<h4 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h4><hr>
<p>位置参数： $0：（程序本身）；$1（第一个参数）、$2（第二个参数）、$3…</p>
<p>$#检查脚本参数输入个数情况</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo &quot;Hello, $1&quot;</span><br><span class="line">if [ -n &quot;$2&quot; ]; then</span><br><span class="line">    echo &quot;Hello, $2&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;No such value~&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;$# values~&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 保存为./<span class="built_in">test</span>，执行./<span class="built_in">test</span> world!</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 一般情况下，需要检查是否存在数据</span></span><br></pre></td></tr></table></figure>
<p>注意：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td><code>$&#123;\!#&#125;</code></td>
<td>返回最后一个参数(不需要加符号<code>\</code>，此处加上因为hexo编译已存在问题)</td>
</tr>
<tr>
<td><code>$#</code></td>
<td>参数个数</td>
</tr>
<tr>
<td><code>$*</code></td>
<td>参数作为一个单词保存</td>
</tr>
<tr>
<td><code>$@</code></td>
<td>当做同一个字符串的多个单词，即list，有for方法</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">！/bin/bash</span></span><br><span class="line">echo $#</span><br><span class="line">echo $&#123;!#&#125;</span><br><span class="line">echo $*</span><br><span class="line">for i in $@; do </span><br><span class="line">    echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>shift n：左移n位参数，默认n=1</p>
<p>处理参数选项：如果输入./test -a -b -c – test1 test2，其中-a -b -c是选项，test1和test2是变量。</p>
<p>注意，这里的”$1”必须加引号，否则默认为原先传入的参数。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">！/bin/bash</span></span><br><span class="line">while [ -n &quot;$1&quot; ]; do</span><br><span class="line">    case &quot;$1&quot; in </span><br><span class="line">        -a) echo &quot;Found -a&quot; ;;</span><br><span class="line">        -b) echo &quot;Found -b&quot; ;;</span><br><span class="line">        -c) echo &quot;Found -c&quot; ;;</span><br><span class="line">        --) shift</span><br><span class="line">            break;;</span><br><span class="line">         *) echo &quot;No such values&quot; ;;</span><br><span class="line">     esac</span><br><span class="line">     shift</span><br><span class="line">     echo $1</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="getopt命令"><a href="#getopt命令" class="headerlink" title="getopt命令"></a>getopt命令</h4><p>格式： getopt optstring parameters</p>
<p>如： getopt ab:cd -a -b test1 -cd test2 test3</p>
<p>输出： -a -b test1 -c -d – test2 test3</p>
<p>分析：指定输入 optstring中的字符串，冒号作为解析parameter的值，-q忽略错误。</p>
<p>脚本中使用getopt，用set替换命令行中的值：</p>
<p>set – $(getopt -q ab:cd “$@”)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">set -- $(getopt -q ab:cd &quot;$@&quot;)</span><br><span class="line">for line in &quot;$@&quot;; do</span><br><span class="line">    echo $line</span><br><span class="line">done</span><br><span class="line"><span class="meta">#</span><span class="bash"> 输入./<span class="built_in">test</span> -asd test1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 输出-a -d -- test1</span></span><br></pre></td></tr></table></figure>


<p>getopts</p>
<p>和getopt不同，getopts只一次只处理一个参数，处理完后，然后返回大于0的退出码。</p>
<hr>
<h4 id="获得用户输入"><a href="#获得用户输入" class="headerlink" title="获得用户输入"></a>获得用户输入</h4><p>常采用read函数，读取一行</p>
<p>设置read的超时处理，read -t 5：超时5s</p>
<p>隐藏用户的输入（输入密码等）：read -s </p>
<p>从文件读取；常采用 <code>&lt;</code>重定向格式。</p>
<hr>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><hr>
<h4 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h4><hr>
<p>linux系统把对象当做文件处理，用文件描述符标识每个对象。</p>
<p>每个对象最多有9个文件描述符，分别为0-9，其中，012作为保留。</p>
<table>
<thead>
<tr>
<th>文件描述符</th>
<th>缩写</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>STDIN</td>
<td>标准输入</td>
</tr>
<tr>
<td>1</td>
<td>STDOUT</td>
<td>标准输出</td>
</tr>
<tr>
<td>2</td>
<td>STDERR</td>
<td>标准错误</td>
</tr>
</tbody></table>
<p>标准输入：</p>
<p>举例： cat &lt; XXX：将XXX文件作为输入到cat，然后cat打印出来。</p>
<p>标准输出：</p>
<p>举例：终端界面就是标准输出，通常采用&gt;XXX，输出到XXX文件。</p>
<p>标准错误：</p>
<p>默认情况下，标准输出和标准错误都会指向终端（同一个文件），可以尝试重定向，生成错误日志。</p>
<hr>
<h4 id="重定向-1"><a href="#重定向-1" class="headerlink" title="重定向"></a>重定向</h4><p>重定向错误： 2&gt; XXX</p>
<p>重定向输出： 1&gt; XXX</p>
<p>重定向错误与输入，将错误重定向到1.txt，输出到2.txt： <code>ls -az 2&gt; 1.txt 1&gt; 2.txt</code></p>
<p>错误和输出重定向到同一个文件：&amp;&gt;</p>
<p>临时重定向：</p>
<p>临时重定向错误：<code>echo &quot;This is a message~&quot; &gt;&amp;2</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo &quot;This is a message~&quot;</span><br><span class="line">echo &quot;This is an error~&quot; &gt;&amp;2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 存为1.sh ，然后运行./1.sh 2&gt; 2.txt</span></span><br></pre></td></tr></table></figure>
<p>输出： This is a message~ 其中，This is an error~ 被重定向了</p>
<p>永久从定向</p>
<p>exec 1&gt;testout</p>
<p>exec将启动一个子shell，并将STDOUT文件重定向到文件testout。</p>
<p>创造自己的重定向：</p>
<p>exec  3&gt;test3out</p>
<p>恢复重定向</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">exec 3&gt;&amp;1</span><br><span class="line">exec 1&gt;testout</span><br><span class="line"></span><br><span class="line">echo &quot;This should store in the output file~&quot;</span><br><span class="line">echo &quot;--------------------------------------&quot;</span><br><span class="line"></span><br><span class="line">exec 1&gt;&amp;3</span><br><span class="line">echo &quot;Now normal~~~~~~~~~~&quot;</span><br><span class="line"></span><br><span class="line">cat testout</span><br></pre></td></tr></table></figure>
<p>简而言之，以上操作，将3先重定向1，通过3保留1的属性；然后修改1；要想恢复1，将3赋值给1即可。</p>
<p>关闭文件描述符： exec 3&gt;&amp;-</p>
<p>重定向到&amp;-即可</p>
<p>列出打开的文件描述符： lsof $$</p>
<p>其中，$$描述当前进程</p>
<hr>
<h4 id="临时文件"><a href="#临时文件" class="headerlink" title="临时文件"></a>临时文件</h4><p>重定向到空： &gt; /dev/null</p>
<p>快速清空文件： /dev/nul &gt; file</p>
<p>mktemp：可以在/temp目录下创建一个唯一的临时文件。</p>
<p>如：<code>mktemp -t asdfas.XXXXXX</code></p>
<p>XXXX会用字符替换X，并保证唯一性</p>
<p>-t参数强制创建文件，并返回路径。</p>
<p>mktemp -d dir.XXXXXX</p>
<p>-d参数创建临时目录</p>
<hr>
<h4 id="记录消息"><a href="#记录消息" class="headerlink" title="记录消息"></a>记录消息</h4><p>tee XXX</p>
<p>将stdin传入的输入同时发往STDOUT和tee 指定的文件名。</p>
<p>如：<code>who | tee 1</code></p>
<p>tee -a 追加到文件中。</p>
<hr>
<h3 id="控制"><a href="#控制" class="headerlink" title="控制"></a>控制</h3><hr>
<h4 id="进程信号"><a href="#进程信号" class="headerlink" title="进程信号"></a>进程信号</h4><table>
<thead>
<tr>
<th>信号</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>SIGHUP</td>
<td>挂起进程</td>
</tr>
<tr>
<td>2</td>
<td>SIGINT</td>
<td>终止进程</td>
</tr>
<tr>
<td>3</td>
<td>SIGQUIT</td>
<td>停止进程</td>
</tr>
<tr>
<td>9</td>
<td>SIGKILL</td>
<td>无条件终止进程</td>
</tr>
<tr>
<td>15</td>
<td>SIGTERM</td>
<td>尽可能终止进程</td>
</tr>
<tr>
<td>17</td>
<td>SIGSTOP</td>
<td>无条件停止进程，但是不是终止进程</td>
</tr>
<tr>
<td>18</td>
<td>SIGTSTP</td>
<td>停止或暂停进程，但不是终止进程</td>
</tr>
<tr>
<td>19</td>
<td>SIGCONF</td>
<td>继续运行停止的程序</td>
</tr>
</tbody></table>
<p>control+c：发出信号2，SIGINT</p>
<p>control+z：暂停进程，SIGTSTP</p>
<p>ps -l显示</p>
<h4 id="捕获信号"><a href="#捕获信号" class="headerlink" title="捕获信号"></a>捕获信号</h4><p>trap commands signals</p>
<p>下面的脚本忽略sigint（control + c）的信号，并控制脚本行为。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">trap &quot;echo &#x27;Sorry, I have trap Control + C&#x27;&quot; SIGINT</span><br><span class="line"></span><br><span class="line">echo &quot;This is a test script!&quot;</span><br><span class="line"></span><br><span class="line">count=1</span><br><span class="line"></span><br><span class="line">while [ $count -le 10 ]; do</span><br><span class="line">    echo &quot;Loop #$count&quot;</span><br><span class="line">    count=$[ $count + 1 ]</span><br><span class="line">    sleep 1</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;End of the script!&quot;</span><br></pre></td></tr></table></figure>
<p>捕获脚本的退出，加上exit：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">trap &quot;echo &#x27;Goodbye...&#x27;&quot; EXIT</span><br><span class="line"></span><br><span class="line">count=1</span><br><span class="line"></span><br><span class="line">while [ $count -le 10 ]; do</span><br><span class="line">    echo &quot;Loop #$count&quot;</span><br><span class="line">    count=$[ $count + 1 ]</span><br><span class="line">    sleep 1</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;End of the script&quot;</span><br></pre></td></tr></table></figure>
<p>修改捕获： 重新设置一个捕获即可</p>
<p>删除设置好的捕获： trap – SIGINT</p>
<p>恢复默认捕获： trap - SIGINT</p>
<hr>
<h4 id="作业控制"><a href="#作业控制" class="headerlink" title="作业控制"></a>作业控制</h4><p>加上 &amp; 符号： ./1.sh &amp;， 但是退出终端时，后台运行的进程也跟着退出</p>
<p>使用nohup命令： nohup ./1.st &amp;，退出终端时，阻止进程推出（阻断了发送给该进程的SIGHUP信号），解除其与终端的关联，stdout和stderr会重定向到nohup.out文件中。</p>
<p>查看作业的PID号： jobs -l</p>
<p>重启某个作业（后台）： bg + 作业号，如：bg 2</p>
<p>重启某个作业（前台）：  fg + 作业号，如： fg 2</p>
<p>定时作业：</p>
<p>at [-f filename] time：at -f 2.sh now</p>
<p>centos中默认没有该命令，需要额外下载。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install at</span><br><span class="line">chkconfig --level 35 atd on</span><br><span class="line">service atd start</span><br></pre></td></tr></table></figure>


<p>cron</p>
<p>cron -u file加载时间表</p>
<p>crontab -l 构建时间表</p>
<p>anacron：自动识别cron是否执行，如果没有执行，则开机立刻执行作业。</p>

</div>


    <div class="post-guide">
        <div class="item left">
            
              <a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/1%E5%9F%BA%E7%A1%80shell%E5%8F%8A%E5%85%B6%E5%91%BD%E4%BB%A4/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  1基础shell及其命令
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/2021/01/17/Shell/Shell%E5%9F%BA%E7%A1%80/5%E5%87%BD%E6%95%B0%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
                5函数和正则表达式
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>



	<div id="vcomments"></div>


<script>
	
		// 评论
		new Valine({
			av: AV,
			el: '#vcomments',
			notify: false,
			verify: false,
			path: window.location.pathname,
			appId: '',
			appKey: '',
			placeholder: '请输入评论',
			avatar: 'retro',
			recordIP: false
		})
	
	
</script>
	</div>
	<div id="footer">
	<p>
	©2019-<span id="footerYear"></span> 
	<a href="/">Rrigyouu</a> 
	
	
		|
		<span id="busuanzi_container_site_pv">
			pv
			<span id="busuanzi_value_site_pv"></span>
		</span>
		|
		<span id="busuanzi_container_site_uv"> 
			uv
			<span id="busuanzi_value_site_uv"></span>
		</span>
	
	<br>
	Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
	by <a href="//github.com/wujun234" target="_blank">WuJun</a>
	Powered by <a href="//hexo.io" target="_blank">Hexo</a>
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>